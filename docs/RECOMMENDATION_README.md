# åŸºæ–¼ Gemini çš„ç”¨æˆ¶æ¨è–¦ç³»çµ±

é€™æ˜¯ä¸€å€‹æ™ºèƒ½ç”¨æˆ¶æ¨è–¦ç³»çµ±ï¼Œä½¿ç”¨ Google Gemini AI æ ¹æ“šæ‚¨çš„æ¢ä»¶æ¨è–¦æœ€åŒ¹é…çš„ç”¨æˆ¶ã€‚

## ç³»çµ±æ¶æ§‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ç”¨æˆ¶æ¨è–¦ç³»çµ±æµç¨‹                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

1. ç”¨æˆ¶æ•¸æ“šåº« (users_database.json)
   â”œâ”€â”€ 100 å€‹ç”¨æˆ¶æ•¸æ“š
   â”œâ”€â”€ åŒ…å«: name, age, occupation, location, hobby, gender
   â””â”€â”€ çœŸå¯¦é ­åƒç…§ç‰‡ (avatars/)

2. è¼¸å…¥æ­£å‘ä¿¡è™Ÿ
   â”œâ”€â”€ Location: åœ°å€ç¯©é¸
   â”œâ”€â”€ Hobby: èˆˆè¶£ç¯©é¸
   â”œâ”€â”€ Occupation: è·æ¥­ç¯©é¸
   â”œâ”€â”€ Age Range: å¹´é½¡ç¯„åœ
   â””â”€â”€ Gender: æ€§åˆ¥

3. æ¨è–¦å¼•æ“
   â”œâ”€â”€ åŸºç¤éæ¿¾: ç¯©é¸ç¬¦åˆæ¢ä»¶çš„ç”¨æˆ¶
   â””â”€â”€ AI æ’åº: ä½¿ç”¨ Gemini æ™ºèƒ½æ’åº

4. è¼¸å‡ºçµæœ
   â”œâ”€â”€ è¿”å› Top K å€‹æœ€åŒ¹é…ç”¨æˆ¶
   â””â”€â”€ è¼¸å‡º JSON æ ¼å¼
```

## æ–‡ä»¶èªªæ˜

### æ ¸å¿ƒæ–‡ä»¶

- **`users_database.json`** - ç”¨æˆ¶æ•¸æ“šåº«ï¼ˆ100 å€‹ç”¨æˆ¶ï¼‰
- **`avatars/`** - ç”¨æˆ¶é ­åƒæ–‡ä»¶å¤¾ï¼ˆ100 å¼µçœŸå¯¦ç…§ç‰‡ï¼‰
- **`recommendation_system.py`** - æ¨è–¦ç³»çµ±æ ¸å¿ƒä»£ç¢¼
- **`gemini_client.py`** - Gemini API å®¢æˆ¶ç«¯

### å·¥å…·è…³æœ¬

- **`generate_users.py`** - ç”Ÿæˆç”¨æˆ¶æ•¸æ“šåº«
- **`download_avatars.py`** - ä¸‹è¼‰çœŸå¯¦é ­åƒç…§ç‰‡
- **`interactive_recommend.py`** - äº’å‹•å¼æ¨è–¦å·¥å…·

## å¿«é€Ÿé–‹å§‹

### 1. ç”Ÿæˆç”¨æˆ¶æ•¸æ“šåº«

å¦‚æœé‚„æ²’æœ‰ç”¨æˆ¶æ•¸æ“šåº«ï¼Œè«‹å…ˆé‹è¡Œï¼š

```bash
python3 generate_users.py
```

é€™å°‡ç”ŸæˆåŒ…å« 100 å€‹ç”¨æˆ¶çš„ JSON æ•¸æ“šåº«ã€‚

### 2. ä¸‹è¼‰çœŸå¯¦é ­åƒ

```bash
python3 download_avatars.py
```

é€™å°‡ä¸‹è¼‰ 100 å¼µçœŸå¯¦äººåƒç…§ç‰‡ä¸¦æ›´æ–°ç”¨æˆ¶æ•¸æ“šåº«ã€‚

### 3. é‹è¡Œæ¨è–¦ç³»çµ±

#### æ–¹å¼ A: äº’å‹•å¼æ¨è–¦ï¼ˆæ¨è–¦ï¼‰

```bash
python3 interactive_recommend.py
```

ç³»çµ±æœƒå¼•å°æ‚¨è¼¸å…¥ç¯©é¸æ¢ä»¶ï¼Œç„¶å¾Œè¿”å›æ¨è–¦çµæœã€‚

#### æ–¹å¼ B: é‹è¡Œç¤ºä¾‹

```bash
python3 recommendation_system.py
```

é€™å°‡é‹è¡Œ 3 å€‹é è¨­çš„æ¨è–¦ç¤ºä¾‹ã€‚

#### æ–¹å¼ C: åœ¨ä»£ç¢¼ä¸­ä½¿ç”¨

```python
from recommendation_system import UserRecommendationSystem

# åˆå§‹åŒ–ç³»çµ±
rec_system = UserRecommendationSystem()

# è¨­å®šç¯©é¸æ¢ä»¶
criteria = {
    "location": "å°åŒ—",
    "hobby": "æ”å½±",
    "age_min": 25,
    "age_max": 35
}

# ç²å–æ¨è–¦
recommendations = rec_system.recommend(criteria, top_k=5)

# é¡¯ç¤ºçµæœ
rec_system.print_recommendations(recommendations)

# ä¿å­˜çµæœ
rec_system.save_recommendations(recommendations, "results.json")
```

## ç¯©é¸æ¢ä»¶èªªæ˜

### æ”¯æŒçš„æ¢ä»¶

| æ¢ä»¶ | éµå | é¡å‹ | ç¤ºä¾‹ | èªªæ˜ |
|------|------|------|------|------|
| åœ°å€ | `location` | string | `"å°åŒ—"`, `"New York"` | æ”¯æŒéƒ¨åˆ†åŒ¹é… |
| èˆˆè¶£ | `hobby` | string æˆ– list | `"æ”å½±"` æˆ– `["æ”å½±", "æ—…éŠ"]` | æ”¯æŒå¤šå€‹èˆˆè¶£ |
| è·æ¥­ | `occupation` | string | `"Engineer"`, `"Designer"` | æ”¯æŒéƒ¨åˆ†åŒ¹é… |
| æœ€å°å¹´é½¡ | `age_min` | int | `25` | å¤§æ–¼ç­‰æ–¼æ­¤å¹´é½¡ |
| æœ€å¤§å¹´é½¡ | `age_max` | int | `35` | å°æ–¼ç­‰æ–¼æ­¤å¹´é½¡ |
| æ€§åˆ¥ | `gender` | string | `"Male"`, `"Female"`, `"Non-binary"` | ç²¾ç¢ºåŒ¹é… |

### æ¢ä»¶çµ„åˆç¤ºä¾‹

```python
# ç¤ºä¾‹ 1: å°‹æ‰¾å°åŒ—åœ°å€å–œæ­¡æ”å½±çš„ç”¨æˆ¶
criteria = {
    "location": "å°åŒ—",
    "hobby": "æ”å½±"
}

# ç¤ºä¾‹ 2: å°‹æ‰¾ 25-35 æ­²çš„å·¥ç¨‹å¸«
criteria = {
    "age_min": 25,
    "age_max": 35,
    "occupation": "Engineer"
}

# ç¤ºä¾‹ 3: å°‹æ‰¾å–œæ­¡æ—…éŠå’Œçƒ¹é£ªçš„å¥³æ€§ç”¨æˆ¶
criteria = {
    "hobby": ["æ—…éŠ", "çƒ¹é£ª"],
    "gender": "Female"
}

# ç¤ºä¾‹ 4: è¤‡é›œæ¢ä»¶çµ„åˆ
criteria = {
    "location": "å°åŒ—",
    "hobby": ["æ”å½±", "æ—…éŠ"],
    "age_min": 25,
    "age_max": 40,
    "occupation": "Designer",
    "gender": "Female"
}
```

## ç”¨æˆ¶æ•¸æ“šæ ¼å¼

æ¯å€‹ç”¨æˆ¶åŒ…å«ä»¥ä¸‹å­—æ®µï¼š

```json
{
  "id": 1,
  "name": "Noah Brown",
  "age": 54,
  "occupation": "Financial Analyst",
  "location": "Los Angeles",
  "hobby": ["Programming", "æ”å½±"],
  "gender": "Non-binary",
  "image": "avatars/avatar_001.jpg"
}
```

## æ¨è–¦ç®—æ³•

### å…©éšæ®µæ¨è–¦

1. **åŸºç¤éæ¿¾éšæ®µ**
   - æ ¹æ“šç”¨æˆ¶æ¢ä»¶ç¯©é¸ç¬¦åˆçš„ç”¨æˆ¶
   - æ”¯æŒåš´æ ¼æ¨¡å¼ï¼ˆæ‰€æœ‰æ¢ä»¶å¿…é ˆåŒ¹é…ï¼‰
   - æ”¯æŒå¯¬é¬†æ¨¡å¼ï¼ˆè‡³å°‘ä¸€å€‹æ¢ä»¶åŒ¹é…ï¼‰

2. **AI æ™ºèƒ½æ’åºéšæ®µ**
   - ä½¿ç”¨ Gemini AI åˆ†æç”¨æˆ¶åŒ¹é…åº¦
   - è€ƒæ…®æ¢ä»¶çš„é‡ç–Šç¨‹åº¦
   - æ™ºèƒ½æ’åºè¿”å›æœ€ä½³åŒ¹é…

### åŒ¹é…é‚è¼¯

- **åœ°å€åŒ¹é…**: æ”¯æŒéƒ¨åˆ†åŒ¹é…ï¼ˆå¦‚ "å°åŒ—" å¯åŒ¹é… "å°åŒ—å¸‚"ï¼‰
- **èˆˆè¶£åŒ¹é…**: æ”¯æŒå¤šå€‹èˆˆè¶£ï¼Œä»»ä¸€åŒ¹é…å³å¯
- **è·æ¥­åŒ¹é…**: æ”¯æŒéƒ¨åˆ†åŒ¹é…ï¼ˆå¦‚ "Engineer" å¯åŒ¹é… "Software Engineer"ï¼‰
- **å¹´é½¡åŒ¹é…**: ç¯„åœåŒ¹é…ï¼Œåœ¨æŒ‡å®šç¯„åœå…§
- **æ€§åˆ¥åŒ¹é…**: ç²¾ç¢ºåŒ¹é…

## API åƒè€ƒ

### UserRecommendationSystem é¡

#### `__init__(database_path="users_database.json")`
åˆå§‹åŒ–æ¨è–¦ç³»çµ±

#### `recommend(criteria, top_k=5, use_ai_ranking=True)`
åŸ·è¡Œæ¨è–¦
- `criteria`: ç¯©é¸æ¢ä»¶å­—å…¸
- `top_k`: è¿”å›ç”¨æˆ¶æ•¸é‡
- `use_ai_ranking`: æ˜¯å¦ä½¿ç”¨ AI æ’åº

è¿”å›: æ¨è–¦ç”¨æˆ¶åˆ—è¡¨

#### `print_recommendations(recommendations)`
æ‰“å°æ¨è–¦çµæœ

#### `save_recommendations(recommendations, output_file)`
ä¿å­˜æ¨è–¦çµæœåˆ° JSON æ–‡ä»¶

## è¼¸å‡ºæ ¼å¼

æ¨è–¦çµæœæœƒä¿å­˜ç‚º JSON æ ¼å¼ï¼š

```json
[
  {
    "id": 42,
    "name": "Emily Williams",
    "age": 36,
    "occupation": "Full Stack Developer",
    "location": "å°åŒ—",
    "hobby": ["Singing", "Photography", "Programming", "Skiing"],
    "gender": "Male",
    "image": "avatars/avatar_061.jpg"
  },
  ...
]
```

## æ€§èƒ½å„ªåŒ–

- ä½¿ç”¨åŸºç¤éæ¿¾æ¸›å°‘éœ€è¦ AI è™•ç†çš„æ•¸æ“šé‡
- Gemini API ä½¿ç”¨è¼ƒä½æº«åº¦ï¼ˆ0.3ï¼‰ç¢ºä¿ç©©å®šçµæœ
- æ”¯æŒé—œé–‰ AI æ’åºä»¥æé«˜é€Ÿåº¦

## å¸¸è¦‹å•é¡Œ

### Q: ç‚ºä»€éº¼æ‰¾ä¸åˆ°åŒ¹é…ç”¨æˆ¶ï¼Ÿ
A: ç³»çµ±æœƒè‡ªå‹•æ”¾å¯¬æ¢ä»¶ã€‚å¦‚æœåš´æ ¼åŒ¹é…æ²’æœ‰çµæœï¼Œæœƒåˆ‡æ›åˆ°å¯¬é¬†æ¨¡å¼ï¼ˆè‡³å°‘ä¸€å€‹æ¢ä»¶åŒ¹é…ï¼‰ã€‚

### Q: å¦‚ä½•æé«˜æ¨è–¦æº–ç¢ºåº¦ï¼Ÿ
A:
1. æä¾›æ›´å…·é«”çš„æ¢ä»¶
2. ä½¿ç”¨å¤šå€‹æ¢ä»¶çµ„åˆ
3. ç¢ºä¿ AI æ’åºé–‹å•Ÿï¼ˆ`use_ai_ranking=True`ï¼‰

### Q: å¯ä»¥è‡ªå®šç¾©ç”¨æˆ¶æ•¸æ“šå—ï¼Ÿ
A: å¯ä»¥ï¼ç›´æ¥ç·¨è¼¯ `users_database.json` æ–‡ä»¶ï¼Œæˆ–ä¿®æ”¹ `generate_users.py` é‡æ–°ç”Ÿæˆã€‚

### Q: é ­åƒå¯ä»¥ä½¿ç”¨æœ¬åœ°ç…§ç‰‡å—ï¼Ÿ
A: å¯ä»¥ï¼å°‡ç…§ç‰‡æ”¾å…¥ `avatars/` æ–‡ä»¶å¤¾ï¼Œä¸¦æ›´æ–°ç”¨æˆ¶æ•¸æ“šä¸­çš„ `image` å­—æ®µã€‚

## æ“´å±•åŠŸèƒ½

### æ·»åŠ è‡ªå®šç¾©æ¢ä»¶

ç·¨è¼¯ `recommendation_system.py` ä¸­çš„ `_filter_users` æ–¹æ³•ï¼š

```python
elif key == "custom_field":
    if user.get("custom_field") == value:
        match_count += 1
```

### èª¿æ•´ AI æ’åºé‚è¼¯

ä¿®æ”¹ `_build_ranking_prompt` æ–¹æ³•ä»¥è‡ªå®šç¾© AI æç¤ºè©ã€‚

### æ‰¹é‡æ¨è–¦

```python
# ç‚ºå¤šå€‹æ¢ä»¶æ‰¹é‡æ¨è–¦
criteria_list = [
    {"location": "å°åŒ—", "hobby": "æ”å½±"},
    {"age_min": 25, "age_max": 35},
    {"occupation": "Engineer"}
]

for i, criteria in enumerate(criteria_list):
    print(f"\næ¨è–¦çµ„ {i+1}")
    recommendations = rec_system.recommend(criteria)
    rec_system.save_recommendations(recommendations, f"batch_{i+1}.json")
```

## æˆæ¬Š

æ­¤é …ç›®ä½¿ç”¨ MIT æˆæ¬Šã€‚

## è²¢ç»

æ­¡è¿æäº¤ Issue å’Œ Pull Requestï¼

---

ğŸ¯ äº«å—æ™ºèƒ½æ¨è–¦ï¼
